# 2.1 위빙 및 아크센싱 조건설정

(1)	위빙 조건

아크센싱은 기본적으로 위빙을 포함하기 때문에 위빙조건 파일에 포함되어 있습니다. 위빙조건파일은 {WEAVON WEV#=?}명령어 위에 커서를 위치시키고 [QuickOpen]키를 누르면 다음과 같은 화면에서 설정할 수 있습니다.


<p align="center">
 <img src="../_assets/2_2.png" width="60%"></img>
 <em><p align="center">그림 2.2 위빙 조건 설정</p></em>
</p>

조건 번호: [1] (범위: 1~ 32)
현재 편집 중인 위빙 조건번호입니다.

위빙 형태: <단진동, 삼각, L형, 원형>
위빙 동작의 형태를 지정합니다.

주파수: [2] Hz (범위: 0.0 ~ 10.0)
위빙 주파수를 설정합니다. 주파수의 범위는 0.0 ~ 10.0Hz 입니다. 주파수가 ‘0’으로 설정된 경우 이동시간을 적용합니다.

기본패턴
위빙 동작의 패턴을 설정합니다.

-	벽방향 거리: [2.5] (범위: 0.5 ~ 50.0mm)
위빙 전진방향에서 볼 때 왼쪽 각장 거리
-	타방향 거리: [2.5] (범위: 0.5 ~ 50.0mm)
위빙 전진방향에서 볼 때 오른쪽 각장 거리
-	각도: [90] (범위: 0.1 ~ 180.0도)
벽, 타방향 위빙면의 각도를 지정합니다.
-	벽방향: <수직방향, 수평방향, 토치자세기준>
벽의 방향을 어떤 기준으로 설정할 것인지 지정합니다. ‘토치자세기준’ 설정이 기본입니다.
-	옵셋각도: [0] (범위: -90.0도 ~ 90.0 도)
벽방향 기준이 ‘토치자세기준’인 경우 위빙면 가운데에서 시프트 할 각도를 지정합
니다.

진행 각도: [0] (범위: -90.0 ~ 90.0도)
진행 방향에 대한 위빙 각도 방향을 나타냅니다. 0도 인 경우 진행방향과 위빙방향은 직각을 이룹니다. 사선 위빙이 필요한 경우 기울어질 각도를 설정하십시오.

경계 제한: <유효, 무효>
위빙궤적이 용접시작 및 끝 부분의 경계부분에 의해 제한되는지 여부를 설정합니다. 본 기능이 유효이면 위빙 궤적은 용접 구간 안에 제한됩니다. 

이동시간: [1] (범위: 0.01 ~ 10.0초), 타이머: [0] (범위: 0.00 ~ 2.00)
위빙 주파수가 ‘0’으로 설정된 경우 이동시간으로 위빙을 수행합니다. 이때 각 구간별 이동시간과 구간 사이의 위빙정지시간을 설정합니다.
 


(2)	아크센싱 조건 - 일반

위빙 조건 대화상자에서 탭 변경하면 다음과 같은 ‘아크센싱 조건-일반 대화상자가 표시됩니다.

 
<p align="center">
 <img src="../_assets/2_3.png" width="60%"></img>
 <em><p align="center">그림 2.3 아크센싱 조건 (일반)</p></em>
</p>

아크센싱 기능 활성화: <무효, 유효>
아크센싱 기능을 활성화 할 것인지 설정합니다.

좌우 센싱 민감도: [0 ~ 10]
위빙 면에서 좌우방향 센싱 민감도를 설정합니다. 10으로 설정하는 경우 엔지니어가 설정한 초당 최대 보정거리를 모두 추종합니다. 0으로 설정하는 경우 좌우방향으로 추종을 수행하지 않습니다.

상하 센싱 민감도: [0 ~ 10]
위빙 면에서 상하방향 센싱 민감도를 설정합니다. 10으로 설정하는 경우 엔지니어가 설정한 초당 최대 보정거리를 모두 추종합니다. 0으로 설정하는 경우 상하방향으로 추종을 수행하지 않습니다.

좌우 센싱 시작 사이클: [0~9]
좌우방향 센싱에 의한 추종을 시작하는 위빙 사이클을 설정합니다. 아크용접을 시작할 때에는 용접전류가 불안정하기 때문에 2~3사이클을 건너뛰는 것이 바람직합니다.

상하 센싱 시작 사이클: [4~10]
상하방향 센싱에 의한 추종을 시작하는 위빙 사이클을 설정합니다. 상하 센싱을 위한 기준 전류 설정 후 동작해야 하므로 좌우 센싱 시작 이후 사이클을 설정해야 합니다.

상하 센싱 기준 전류: [0~3000] A
상하방향 센싱 시 기준 전류입니다. 아크 용접은 와이어 돌출길이가 길어지면 전류가 낮아지고 짧아지면 전류가 높아집니다. 따라서 기준 전류를 지정하면 토치 높이를 조절할 수 있습니다. 0을 입력하는 경우 용접 초반 상하 센싱 시작 사이클의 전류값을 기준으로 선택합니다.


아크센싱 타입 선택: <용접선,전류차,전류차+Gap>
아크센싱 추종 방법을 선택합니다.
용접선: 전류가 가장 낮은 위치를 기준으로 용접선 추적.
        실링비드, 가접이 없는 초층 용접에 사용.
전류차: 위빙 양 끝단의 전류차를 비교하여 용접선 추종.
        초층,실링 비드 등이 있어도 사용 가능. 기본 선택 항목.
전류차+Gap: 위빙 양 끝단의 전류차를 이용한 용접선 추종과 함께 위빙 폭 및 용접속도를 함께 조절하는 옵션. 작업물의 편차가 있는 Butt 용접 타입에 사용

 

(3)	아크센싱 조건 – 고급

위빙 조건 대화상자에서 탭을 변경하면 다음과 같은 ‘아크센싱 조건-엔지니어’ 대화상자가 표시됩니다.
※ 이 대화상자는 엔지니어 권한이 있어야 진입이 가능합니다.

<p align="center">
 <img src="../_assets/2_4.png" width="60%"></img>
 <em><p align="center">그림 2.4 아크센싱 조건 (고급) 설정</p></em>
</p>

좌우 센싱 모드: <중심선>
좌우 센싱 모드를 선택합니다. 중심선 방식만 지원합니다.

상하 센싱 모드: <전류변화, 벽방향 고정, 타방향 고정, 무효>
상하방향 방법을 선택하는 항목입니다. 일반적인 아크센싱의 경우 전류 변화를 통하여 높이를 보정할 수 있으므로 대부분 전류변화를 사용합니다. 그러나 알루미늄 용접과 같은 경우 전류 변화로 높이를 보정할 수 없으므로 벽방향 고정, 혹은 타방향 고정을 사용하여 한쪽 면이 고정된 경우에 높이 센싱이 가능합니다. ‘무효’를 선택하는 경우 좌우 센싱만 수행합니다. 

초당 최대 보정거리(좌우): [0.1~20.0] mm
좌우 방향의 초당 최대 추종거리를 설정합니다. 실제 최대 추종거리는 하기와 같이 계산됩니다.

실제 최대 추종거리(좌우) = 초당 최대 보정거리(좌우) * 좌우 센싱 민감도/10

초당 최대 보정거리(상하): [0.1~20.0] mm
상하 방향의 초당 최대 추종거리를 설정합니다. 실제 최대 추종거리는 하기와 같이 계산됩니다.

실제 최대 추종거리(상하) = 초당 최대 보정거리(상하) * 상하 센싱 민감도/10

좌우 궤적 이탈 제한: [0~200] mm
로봇이 티칭 궤적으로부터 추종할 수 있는 좌우 방향 최대 거리입니다. 로봇이 이 값 이상 티칭 궤적에서 벗어나는 경우 에러로 정지합니다. 이 기능을 이용하면 로봇이 궤적을 이탈한 경우 잘못된 위치를 용접하는 거리를 최소화 할 수 있습니다.

상하 궤적 이탈 제한: [0~200] mm
로봇이 티칭 궤적으로부터 추종할 수 있는 상하 방향 최대 거리입니다. 로봇이 이 값 이상 티칭 궤적에서 벗어나는 경우 에러로 정지합니다. 이 기능을 이용하면 로봇이 궤적을 이탈한 경우 잘못된 위치를 용접하는 거리를 최소화 할 수 있습니다.

측면 계산 범위: [1 ~ 100] %
좌우 전류값 비교 시 사용하는 전류 범위를 설정합니다. 위빙 좌/우의 꼭지점에서 이 값의 범위만큼 전류값을 이용하여 센싱을 수행합니다.

좌우 비대칭 센싱 비율: [-40 ~ 40]
좌측과 우측의 용접비드 모양을 비대칭으로 형성하면서 용접선을 추종하기 위한 비율입니다. 설정된 비율대로 전체 위빙 구간 범위에서 좌(-), 우(+) 방향 시프트하여 용접을 수행합니다.
이 비율은 위빙 폭에 비례한 값이며 용접선 추종 게인이 정확히 설정되어야 정상적으로 동작합니다.
비대칭 비율을 과도하게 설정하는 경우 용접선 이탈이 발생할 수 있습니다. 이 경우에는 비대칭 비율을 줄여야 합니다.

비정상 데이터 처리 방법: <에러, 경고, 무효>
용접 중 센싱 용 입력 데이터가 불안정 한 경우 데이터 처리 방법입니다.
-	에러: E32756 (아크센싱 전류가 정상 범위를 비정상 판별 시간 이상 초과했습니다.) 에러가 발생하고 로봇 정지 처리 수행
-	경고: W32756 (아크센싱 용 입력 데이터가 불안정하여 정상 범위를 비정상 판별 시간 이상 초과하였습니다.) 경고가 발생하고 로봇은 계속 작업 수행
-	무효: 비정상 데이터를 무시하고 센싱 작업을 계속 수행합니다.

비정상 판별 마진: [100~200] %
비정상 전류로 판별하기 위한 마진을 설정합니다. 비정상 전류의 판별은 과거 5개의 데이터를 기준으로 다음과 같이 판별합니다. 
-	비정상 판별 상한값 = 과거 5개의 평균×비정상 판별 마진
-	비정상 판별 하한값 = (과거 5개의 평균×2)– 비정상 판별 상한값
 
비정상 판별 시간: [10~1000] ms
입력 전류가 『비정상 판별 마진』을 초과할 때 비정상적인 것을 판별하는 시간을 설정합니다. 이 값은 비정상 데이터를 얼마나 빨리 할 것인가를 결정하는 요소이기는 하나, 너무 적으면 별다른 에러가 없는 경우에도 비정상으로 인식할 가능성이 있기 때문에 환경에 맞게 설정해야 합니다.

궤적 이탈 감소: <무효, 유효>
용접선 방식의 추종을 사용할 때 좌우 전류차에 의해 계산된 추종 방향과 용접선에 의해 계산된 추종 방향이 다른 경우 처리 방식을 선택합니다.
무효: 용접선 방식 보정량을 보정 거리에 반영
유효: 계산된 보정량을 0으로 처리하여 기존 보정 거리를 유지

스텝 전후진 시 보정거리 유지: <클리어, 유지>
아크센싱이나 멀티패스 동작 중 정지 후 스텝 전후진을 수행하는 경우 기존까지 보정 거리를 유지할 것인지 여부를 설정합니다.
클리어: 보정 거리를 0으로 설정
유지: 보정 거리를 유지하면서 스텝 전후진 동작 수행


 

(4)	Data 지연 및 추종 계수 테이블

위빙 조건 대화상자에서 탭을 변경하면 다음 화면과 같은 ‘Data 지연 및 추종 계수 테이블’ 대화상자가 표시됩니다.

<p align="center">
 <img src="../_assets/2_5.png" width="60%"></img>
 <em><p align="center">그림 2.5 Data 지연 및 추종 계수 테이블 설정</p></em>
</p>


위빙 주파수
테이블 데이터를 입력할 위빙 주파수를 입력합니다. 일반적으로 0.5Hz ~ 4.0Hz까지 0.5Hz 단위로 테이블을 생성합니다.

Data 지연 시간
각 위빙 주파수 별로 데이터가 지연되는 시간을 입력합니다. 이 지연시간은 별도의 테스트(6.2장 참조)를 통해 계산됩니다. 용접기의 용접 모드(펄스 여부, 가스 종류)나 프로그램 번호별로 최대 3개의 모드로 구분하여 입력할 수 있습니다. 센싱 동작 시 용접 모드, 프로그램 번호에 따라 해당 모드의 data 지연시간이 적용됩니다.

용접선 추종 게인
각 위빙 주파수 별로 토치 위치 변화에 따른 전류값 변화 게인입니다. 좌우/상하 방향의 게인이 분리되어 있으며 별도의 테스트(6.2장 참조)를 통해 계산됩니다.

용접 모드
센싱에 사용할 용접 조건의 모드를 입력합니다. 용접 작업 수행 후 옆에 표시되는 현재 모드를 참고하여 적용하고자 하는 data 지연시간 모드에 값을 입력합니다.

프로그램 번호
센싱에 사용할 용접기의 프로그램 번호를 입력합니다. 용접 작업 수행 후 옆에 표시되는 현재 번호를 참고하여 적용하고자 하는 data 지연시간 모드에 값을 입력합니다.

※ 현재 용접에 사용하는 용접모드, 프로그램 번호와 맞는 모드가 없는 경우 용접 모드 0, 프로그램 번호 0으로 설정된 모드의 지연시간을 default 지연시간으로 사용합니다. 용접기가 Job mode를 사용하면서 많은 job번호를 사용하는 경우 이 default 지연시간을 이용하여 센싱을 수행할 수 있습니다.
